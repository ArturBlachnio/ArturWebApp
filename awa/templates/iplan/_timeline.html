{% extends "layout.html" %}
{% block content %}
<div class="container">
    <div class="row content-section">
        {% for timeline in timeline_ranges()%}
        <div class="col-md-4 border p-1 rounded">
            <div class="col-12 border timeline_task_border rounded p-0">
                <small class="timeline_header ml-1">{{ timeline[2] }} </small>
                <small class="timeline_header text-muted">({{fromtimestamp(timeline[0]).strftime('%d.%m %H:%M')}} - {{fromtimestamp(timeline[1]).strftime('%d.%m %H:%M')}})</small>
                {% for task in tasks %}
                    {% if task.time_line >= fromtimestamp(timeline[0]) and task.time_line < fromtimestamp(timeline[1]) %}
                        <!-- Name -->
                         <div class="row rounded-top border border-bottom-0 border-secondary timeline_task_name pl-1 pb-1 ml-1 mr-1" style="background-color:{{task.strategy.color}}">
                            {{task.name}}
                        </div>
                        <!-- Buttons -->
                        <div class="row rounded-bottom border border-top-0 border-secondary timeline_task_buttons mb-1 ml-1 mr-1" style="background-color:{{task.strategy.color}}">
                                {% if task.timer_start %}
                                    <a href="{{url_for('iplan.task_timer_start', id_task=task.id) }}" class="badge badge-light">Reset</a>
                                    <a href="{{url_for('iplan.task_timer_end', id_task=task.id) }}" class="badge badge-danger">Stop</a>
                                {% else %}
                                    <a href="{{url_for('iplan.task_timer_start', id_task=task.id) }}" class="badge badge-light">Start</a>
                                    {% if task.time_completion %}
                                        <a href="{{url_for('iplan.task_restore', id_task=task.id)}}" class="badge badge-primary">Restore</a>
                                    {% else %}
                                        {% if task.frequency == 'OneTime' %}
                                            <a href="{{url_for('iplan.task_complete', id_task=task.id)}}" class="badge badge-success">Done</a>
                                        {% else %}
                                            <a href="{{url_for('iplan.task_complete', id_task=task.id)}}" class="badge badge-success">Done+</a>
                                        {% endif %}
                                    {% endif %}
                                {% endif%}
                                {% if task.timer_start %}
                                    <a href="#" class="badge badge-warning">{{string_from_duration(now - task.timer_start)}}</a>
                                {% endif %}
                                <a href="#" class="badge badge-info">{{string_from_duration(task.duration_real)}}</a>
                                <a href="#" class="badge badge-light">{{string_from_duration(task.duration_plan)}}</a>
<!--                                <small class="timeline_header text-muted ml-auto">({{task.time_line.strftime('%dd%H:%M')}})</small>-->
                                <a href="{{url_for('iplan.task_update', id_task=task.id) }}" class="badge badge-secondary ml-auto">Edit</a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='top')}}" class="badge badge-secondary">top</a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='up')}}" class="badge badge-secondary">up</a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='down')}}" class="badge badge-secondary">dn</a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='bottom')}}" class="badge badge-secondary">bot</a>
                                <a href="{{url_for('iplan.task_move_timeline', id_task=task.id, direction='previous') }}" class="badge badge-secondary"><</a>
                                <a href="{{url_for('iplan.task_move_timeline', id_task=task.id, direction='next') }}" class="badge badge-secondary">></a>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock content %}

                                <a href="{{url_for('iplan.task_update', id_task=task.id) }}" class="ml-auto">
                                    <svg class="bi bi-gear timeline_icons" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                      <path fill-rule="evenodd" d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 014.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 01-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 011.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 012.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 012.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 011.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 01-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 018.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 001.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 00.52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 00-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 00-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 00-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 00-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 00.52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 001.255-.52l.094-.319z" clip-rule="evenodd"/>
                                      <path fill-rule="evenodd" d="M8 5.754a2.246 2.246 0 100 4.492 2.246 2.246 0 000-4.492zM4.754 8a3.246 3.246 0 116.492 0 3.246 3.246 0 01-6.492 0z" clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='top')}}" class="">
                                    <svg class="bi bi-chevron-bar-up timeline_icons" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M3.646 11.854a.5.5 0 00.708 0L8 8.207l3.646 3.647a.5.5 0 00.708-.708l-4-4a.5.5 0 00-.708 0l-4 4a.5.5 0 000 .708zM2.4 5.2c0 .22.18.4.4.4h10.4a.4.4 0 000-.8H2.8a.4.4 0 00-.4.4z" clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='up')}}" class="">
                                    <svg class="bi bi-chevron-compact-up timeline_icons" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                      <path fill-rule="evenodd" d="M7.776 5.553a.5.5 0 01.448 0l6 3a.5.5 0 11-.448.894L8 6.56 2.224 9.447a.5.5 0 11-.448-.894l6-3z" clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='down')}}" class="">
                                    <svg class="bi bi-chevron-compact-down timeline_icons" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                      <path fill-rule="evenodd" d="M1.553 6.776a.5.5 0 01.67-.223L8 9.44l5.776-2.888a.5.5 0 11.448.894l-6 3a.5.5 0 01-.448 0l-6-3a.5.5 0 01-.223-.67z" clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <a href="{{url_for('iplan.task_move', id_task=task.id, direction='bottom')}}" class="">
                                    <svg class="bi bi-chevron-bar-down timeline_icons" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                      <path fill-rule="evenodd" d="M3.646 4.146a.5.5 0 01.708 0L8 7.793l3.646-3.647a.5.5 0 01.708.708l-4 4a.5.5 0 01-.708 0l-4-4a.5.5 0 010-.708zM1 11.5a.5.5 0 01.5-.5h13a.5.5 0 010 1h-13a.5.5 0 01-.5-.5z" clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <a href="{{url_for('iplan.task_move_timeline', id_task=task.id, direction='previous') }}" class="">
                                    <svg class="bi bi-chevron-left timeline_icons" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 010 .708L5.707 8l5.647 5.646a.5.5 0 01-.708.708l-6-6a.5.5 0 010-.708l6-6a.5.5 0 01.708 0z" clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <a href="{{url_for('iplan.task_move_timeline', id_task=task.id, direction='next') }}" class="">
                                    <svg class="bi bi-chevron-right timeline_icons" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L10.293 8 4.646 2.354a.5.5 0 010-.708z" clip-rule="evenodd"/>
                                    </svg>
                                </a>
